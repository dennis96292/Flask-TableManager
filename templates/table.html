<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>å³æ™‚è¡¨æ ¼</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <style>
        body { background-color: #121212; color: white; }
        .container { max-width: 95%; margin-top: 20px; }

        /* ğŸ”¹ å›ºå®šè¡¨æ ¼æ¬„é«˜ï¼Œç¢ºä¿æ‰€æœ‰è¡Œé«˜çµ±ä¸€ */
        table { width: 100%; border-collapse: collapse; }
        th, td { 
            padding: 15px; 
            text-align: center; 
            border: 1px solid #444; 
            background-color: #2E2E2E;
            color: white;
            height: 50px;  /* ğŸ”¹ çµ±ä¸€å›ºå®šé«˜åº¦ */
            vertical-align: middle; /* ğŸ”¹ æ–‡å­—ç½®ä¸­ */
            white-space: nowrap; /* ğŸ”¹ é˜²æ­¢æ›è¡Œ */
        }

        th { background-color: #1e1e1e; }
        .btn { margin: 10px; }
    </style>
</head>
<body>
    <div class="container">
        <h2 class="text-center">5GåŒ…</h2>
        <div class="table-responsive">
            <table class="table table-dark table-bordered" id="data-table">
                <thead>
                    <tr id="header-row"></tr>
                </thead>
                <tbody id="table-body"></tbody>
            </table>
        </div>
        <a href="/edit" class="btn btn-primary">å‰å¾€ç·¨è¼¯</a>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            loadTable();
            setInterval(loadTable, 5000);  // ğŸ”¹ æ¯ 5 ç§’è‡ªå‹•æ›´æ–°è¡¨æ ¼
        });

        function loadTable() {
            fetch("/api/load")
                .then(response => response.json())
                .then(data => {
                    console.log("ğŸ“¥ Loaded table data:", data); // ç¢ºä¿ table.html è®€å–æœ€æ–°æ•¸æ“š

                    let headerRow = document.getElementById("header-row");
                    let tableBody = document.getElementById("table-body");
                    headerRow.innerHTML = "";
                    tableBody.innerHTML = "";

                    if (data.tableData.length > 0) {
                        let keys = data.headerOrder;  // è®€å–å„²å­˜çš„è¡¨é ­é †åº

                        keys.forEach(key => {
                            let th = document.createElement("th");
                            th.textContent = key;
                            headerRow.appendChild(th);
                        });

                        data.tableData.forEach(row => {
                            let tr = document.createElement("tr");
                            keys.forEach(key => {
                                let td = document.createElement("td");
                                td.textContent = row[key] || ""; // è®€å–å…§å®¹
                                td.style.height = "50px"; // ğŸ”¹ ç¢ºä¿è¡¨æ ¼è¡Œé«˜ä¸€è‡´
                                tr.appendChild(td);
                            });
                            tableBody.appendChild(tr);
                        });
                    }
                }).catch(error => {
                    console.error("âŒ Error loading table data:", error);
                });
        }
    </script>
</body>
</html>
